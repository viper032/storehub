<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://kit.fontawesome.com/9a93cb04a1.js" crossorigin="anonymous"></script>
</head>

<body>
  <h1>Apple iPad</h1>
  <div>
    <table>
      <thead>
        <tr>
          <th class="youCanSort" onclick="Sort(this)">ID<i class="fas fa-sort-up"></i></th>
          <th class="youCanSort" onclick="Sort(this)">Price<i class="fas fa-sort"></i></th>
          <th class="youCanSort" onclick="Sort(this)">Capacity<i class="fas fa-sort"></i></th>
          <th class="youCanSort" onclick="Sort(this)">Model<i class="fas fa-sort"></i></th>
          <th class="youCanSort" onclick="Sort(this)">Pic<i class="fas fa-sort"></i></th>
        </tr>
      </thead>
      <thead>
      <tbody></tbody>
      </thead>
    </table>
  </div>

  <script>
    var ipads = [
      {
        "sku": "MW762",
        "price": 10900,
        "storage": "32GB",
        "description": "10.2 吋 iPad Wi-Fi 機型 32GB - 金色",
        "picture": "Bulid School Lab/pic/ipad_gold.png"
      },
      {
        "sku": "MW792",
        "price": 13900,
        "storage": "128GB",
        "description": "10.2 吋 iPad Wi-Fi 機型 128GB - 金色",
        "picture": "ipad_gold.png"
      },
      {
        "sku": "MW742",
        "price": 10900,
        "storage": "32GB",
        "description": "10.2 吋 iPad Wi-Fi 機型 32GB - 太空灰色",
        "picture": "ipad_space.png"
      },
      {
        "sku": "MW772",
        "price": 13900,
        "storage": "128GB",
        "description": "10.2 吋 iPad Wi-Fi 機型 128GB - 太空灰色",
        "picture": "ipad_space.png"
      },
      {
        "sku": "MW752",
        "price": 10900,
        "storage": "32GB",
        "description": "10.2 吋 iPad Wi-Fi 機型 32GB - 銀色",
        "picture": "ipad_silver.png"
      },
      {
        "sku": "MW782",
        "price": 13900,
        "storage": "128GB",
        "description": "10.2 吋 iPad Wi-Fi 機型 128GB - 銀色",
        "picture": "ipad_silver.png"
      },
      {
        "sku": "MW6D2",
        "price": 15400,
        "storage": "32GB",
        "description": "10.2 吋 iPad Wi-Fi + 行動網路機型 32GB - 金色",
        "picture": "ipad_gold.png"
      },
      {
        "sku": "MW6G2",
        "price": 18400,
        "storage": "128GB",
        "description": "10.2 吋 iPad Wi-Fi + 行動網路機型 128GB - 金色",
        "picture": "ipad_gold.png"
      },
      {
        "sku": "MW6A2",
        "price": 15400,
        "storage": "32GB",
        "description": "10.2 吋 iPad Wi-Fi + 行動網路機型 32GB - 太空灰色",
        "picture": "ipad_space.png"
      },
      {
        "sku": "MW6E2",
        "price": 18400,
        "storage": "128GB",
        "description": "10.2 吋 iPad Wi-Fi + 行動網路機型 128GB - 太空灰色",
        "picture": "ipad_space.png"
      },
      {
        "sku": "MW6C2",
        "price": 15400,
        "storage": "32GB",
        "description": "10.2 吋 iPad Wi-Fi + 行動網路機型 32GB - 銀色",
        "picture": "ipad_silver.png"
      },
      {
        "sku": "MW6F2",
        "price": 18400,
        "storage": "128GB",
        "description": "10.2 吋 iPad Wi-Fi + 行動網路機型 128GB - 銀色",
        "picture": "ipad_silver.png"
      }
    ];

    var tBody = document.getElementsByTagName('tbody')[0];

    for (let i of ipads) {
      let tr = document.createElement('tr');
      for (let j in i) {
        let td = document.createElement('td');
        td.innerText = i[j];
        tr.appendChild(td);
      }
      tBody.appendChild(tr);
    }

    var isDesc = false;

    function Sort(el) {

      //reset icon
      let thGroup = document.getElementsByClassName('youCanSort');
      for (let th of thGroup) {
        th.firstElementChild.classList.remove('fa-sort-down');
        th.firstElementChild.classList.remove('fa-sort-up');
        th.firstElementChild.classList.remove('fa-sort');
        th.firstElementChild.classList.add('fa-sort');
      }

      //抓到下面的icon
      let nowIcon = el.firstElementChild;
      //console.log(nowIcon.classList);

      //用prop排序
      let sortResult = ipads.sort(function (a, b) {
        if (!isDesc) {
          if (typeof (a[el.innerText]) == 'string') {
            if (a[el.innerText] >= b[el.innerText]) {
              return 1;
            } else {
              return -1;
            }
          }
          return a[el.innerText] - b[el.innerText];
        } else {
          if (typeof (el.innerText) == 'string') {
            if (a[el.innerText] <= b[el.innerText]) {
              return 1;
            } else {
              return -1;
            }
          }
          return b[el.innerText] - a[el.innerText];
        }
      });

      ipads = sortResult;

      //清空元素
      tBody.innerHTML = '';

      //長新的
      for (let item of sortResult) {
        let tr = document.createElement('tr');
        for (let prop in item) {
          let td = document.createElement('td');
          td.innerText = item[prop];
          tr.appendChild(td);
        }
        tBody.appendChild(tr);
      }

      //let test = document.getElementById('t').classList.remove

      if (isDesc) {
        isDesc = false;
        nowIcon.classList.remove('fa-sort');
        nowIcon.classList.remove('fa-sort-down');
        nowIcon.classList.add('fa-sort-up');
      } else {
        isDesc = true;
        nowIcon.classList.remove('fa-sort');
        nowIcon.classList.remove('fa-sort-up');
        nowIcon.classList.add('fa-sort-down');
      }
    }
  </script>
</body>

</html>